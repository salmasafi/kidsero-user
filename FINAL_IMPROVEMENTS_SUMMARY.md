# ููุฎุต ุดุงูู ูุฌููุน ุงูุชุญุณููุงุช ุงููุทุจูุฉ

## 1. โ ุฅุตูุงุญ ุญูุธ ุงูุชููู (Token Persistence)
**ุงููุดููุฉ**: ุงููุณุชุฎุฏููู ูุญุชุงุฌูู ูุชุณุฌูู ุงูุฏุฎูู ูู ูู ูุฑุฉ

**ุงูุญู**:
- ุฅุถุงูุฉ redirect logic ูู ุงูุฑุงูุชุฑ ููุชุญูู ูู ุงูุชููู ุงููุญููุธ
- ุชุญุณูู ุชููุฆุฉ ุงูุฎุฏูุงุช ูุชุญููู ุงูุชููู ูุจู ุงูุชูุฌูู

**ุงููููุงุช**: `lib/core/routing/app_router.dart`, `lib/main.dart`

---

## 2. ๐ ุฅุตูุงุญ ุนุฑุถ ุงูุฑุญูุงุช ุงููุงุฑุบุฉ (Empty Rides Display)
**ุงููุดููุฉ**: API ูุฑุฌุน `{"activeRides": []}` ููู ุงูุชุทุจูู ูุนุฑุถ "1 ุฑุญูุฉ"

**ุงูุญู**:
- ุฅุตูุงุญ parsing ููุชุญูู ูู ุงูููุชุงุญ ุงูุตุญูุญ `data.activeRides`
- ุฅุถุงูุฉ debug logging ูุชุชุจุน ุงููุดููุฉ
- ุชุฌุงูุฒ ุงููุงุด ูุคูุชุงู ููุชุฃูุฏ ูู ุงูุจูุงูุงุช ุงูุทุงุฒุฌุฉ

**ุงููููุงุช**: `lib/features/rides/models/ride_models.dart`, `lib/features/rides/data/rides_repository.dart`

**ููุงุญุธุฉ**: ูุฌุจ ูุณุญ ุจูุงูุงุช ุงูุชุทุจูู (Clear Data) ูุงุฎุชุจุงุฑ ุงูุฅุตูุงุญ

---

## 3. โ ุชุญุณูู ูุงุฌูุฉ ุจูุงูุงุช ุงูุฃุทูุงู (Child Data UI)
**ุงููุดููุฉ**: ุนุฑุถ "N/A" ููุจูุงูุงุช ุงูููููุฏุฉ

**ุงูุญู**:
- ุชุญุฏูุซ ูููุฐุฌ Child ุจุฎุตุงุฆุต ุฐููุฉ (displayGrade, displayClassroom, displaySchoolName)
- ุชุญุฏูุซ ChildCard ูุนุฑุถ ุงูุจูุงูุงุช ุงููุชุงุญุฉ ููุท
- ููุทู ุนุฑุถ ุฐูู:
  - ุตู + ูุตู โ "ุงูุตู ุงูุซุงูุซ โข 3/ุฃ"
  - ุตู ููุท โ "ุงูุตู ุงูุซุงูุซ"
  - ูุตู ููุท โ "3/ุฃ"
  - ูุฏุฑุณุฉ ููุท โ "Franciscan Schools"
  - ูุง ุจูุงูุงุช โ ูุณุงูุฉ ูุงุฑุบุฉ (ุจุฏูู N/A)

**ุงููููุงุช**: 
- `lib/features/children/model/child_model.dart`
- `lib/core/widgets/child_card.dart`
- `lib/features/rides/ui/screens/rides_screen.dart`
- `lib/features/rides/ui/screens/child_schedule_screen.dart`

---

## 4. โ ุฅุตูุงุญ ุงูุดุงุดุฉ ุงูุจูุถุงุก ูู ุงูุจุฑููุงูู
**ุงููุดููุฉ**: ุนูุฏ ุฅุบูุงู ุฏูุงููุฌ ุงูุฃุทูุงูุ ุชุตุจุญ ุตูุญุฉ ุงูุจุฑููุงูู ุจูุถุงุก

**ุงูุณุจุจ**: BlocBuilder ูุนูุฏ ุงูุจูุงุก ุนูุฏ `ChildrenLoading` state ููุง ูุฌุฏ ุญุงูุฉ ูุทุงุจูุฉ

**ุงูุญู**:
- ุงุณุชุฎุฏุงู `buildWhen` ูุชุตููุฉ ุงูุญุงูุงุช
- ุฅุนุงุฏุฉ ุงูุจูุงุก ููุท ูุญุงูุงุช ุงูุจุฑููุงููุ ุชุฌุงูู ุญุงูุงุช ุงูุฃุทูุงู
- ุฅุถุงูุฉ `whenComplete` ูุชุญุฏูุซ ุงูุจุฑููุงูู ุนูุฏ ุฅุบูุงู ุงูุฏูุงููุฌ

**ุงูููู**: `lib/features/profile/ui/view/profile_view.dart`

```dart
BlocBuilder<ProfileCubit, ProfileState>(
  buildWhen: (previous, current) {
    return current is ProfileLoading ||
           current is ProfileLoaded ||
           current is ProfileError;
  },
  builder: (context, state) { ... },
)
```

---

## 5. โ ุชุญุณูู ุตูุญุฉ Today - ุนุฑุถ ุงูุฑุญูุฉ ุงููุดุทุฉ
**ุงููุดููุฉ**: ุตูุญุฉ Today ูุง ุชุนุฑุถ ุงูุฑุญูุฉ ุงููุดุทุฉ (Current Ride) ุจุดูู ูููุฒ

**ุงูุญู**:
- ุฅุถุงูุฉ `activeRide` ุฅูู `ChildRidesLoaded` state
- ุฌูุจ ุงูุฑุญูุงุช ุงููุดุทุฉ ูุงูุจุญุซ ุนู ุฑุญูุฉ ุงูุทูู ุงูุญุงูู
- ุนุฑุถ ุงูุฑุญูุฉ ุงููุดุทุฉ ูู ูุงุฑุช ุฃุฎุถุฑ ูููุฒ ูู ุงูุฃุนูู
- ุนุฑุถ ูุนูููุงุช ุงูุฑุญูุฉ (ููุช ุงูุจุฏุกุ ETA)
- ุฒุฑ ููุชุชุจุน ุงููุจุงุดุฑ

**ุงููููุงุช**:
- `lib/features/rides/cubit/child_rides_cubit.dart`
- `lib/features/rides/ui/screens/child_schedule_screen.dart`

**ุงููููุฒุงุช**:
- ูุงุฑุช ุฃุฎุถุฑ ุจุชุฏุฑุฌ ุฌุฐุงุจ
- ุดุงุฑุฉ "LIVE" ููุฅุดุงุฑุฉ ููุฑุญูุฉ ุงูุฌุงุฑูุฉ
- ูุนูููุงุช ุงูุชูููุช (Started, ETA)
- ุฒุฑ ุงูุชุชุจุน ุงููุจุงุดุฑ

---

## ุงููููุงุช ุงูุฑุฆูุณูุฉ ุงููุนุฏูุฉ

### Core
- `lib/core/routing/app_router.dart` - Token redirect
- `lib/main.dart` - Service initialization
- `lib/core/widgets/child_card.dart` - Smart data display

### Models
- `lib/features/children/model/child_model.dart` - Enhanced child model
- `lib/features/rides/models/ride_models.dart` - Fixed parsing

### Cubits
- `lib/features/profile/logic/cubit/profile_cubit.dart` - State management
- `lib/features/rides/cubit/child_rides_cubit.dart` - Active ride support

### UI
- `lib/features/profile/ui/view/profile_view.dart` - buildWhen fix
- `lib/features/rides/ui/screens/rides_screen.dart` - Child data display
- `lib/features/rides/ui/screens/child_schedule_screen.dart` - Today tab with active ride
- `lib/features/rides/data/rides_repository.dart` - Debug logging

---

## TODO - ุงูุชุญุณููุงุช ุงููุณุชูุจููุฉ

### ุนุงุฌู
- [ ] ุฅุฒุงูุฉ debug logging ูู rides_repository.dart
- [ ] ุฅุฒุงูุฉ `forceRefresh = true` ูู rides_repository.dart
- [ ] ุฅุถุงูุฉ ุงูุชุฑุฌูุงุช ูููุตูุต ุงูุฌุฏูุฏุฉ ูู Today tab
- [ ] ุงุฎุชุจุงุฑ ุดุงูู ูุฌููุน ุงูุชุญุณููุงุช

### ูุชูุณุท ุงูุฃููููุฉ
- [ ] ุฑุจุท ุฒุฑ "Track Live Location" ุจุดุงุดุฉ ุงูุชุชุจุน ุงููุจุงุดุฑ
- [ ] ุฅุถุงูุฉ ุชุญุฏูุซ ุชููุงุฆู ููุฑุญูุฉ ุงููุดุทุฉ ูู 30 ุซุงููุฉ
- [ ] ุนุฑุถ ูุนูููุงุช ุงูุณุงุฆู ูุงูุจุงุต ูู ูุงุฑุช ุงูุฑุญูุฉ ุงููุดุทุฉ
- [ ] ุฅุถุงูุฉ ุฃููููุดู ุนูุฏ ุธููุฑ ุงููุงุฑุช ุงูุฃุฎุถุฑ

### ููุฎูุถ ุงูุฃููููุฉ
- [ ] ุชุญุณูู ูุนุงูุฌุฉ ุงูุฃุฎุทุงุก ูู ุฌููุน ุงูุดุงุดุงุช
- [ ] ุฅุถุงูุฉ unit tests ููู cubits
- [ ] ุชุญุณูู ุงูุฃุฏุงุก ุจุชูููู ุนูููุงุช ุงูุจูุงุก ุบูุฑ ุงูุถุฑูุฑูุฉ

---

## ุงูุงุฎุชุจุงุฑ ุงูุดุงูู

### 1. Token Persistence
- [ ] ุชุณุฌูู ุงูุฏุฎูู
- [ ] ุฅุบูุงู ุงูุชุทุจูู
- [ ] ูุชุญ ุงูุชุทุจูู ูุฑุฉ ุฃุฎุฑู
- [ ] ุงูุชุญูู ูู ุนุฏู ุงูุญุงุฌุฉ ูุชุณุฌูู ุงูุฏุฎูู

### 2. Empty Rides Display
- [ ] ูุณุญ ุจูุงูุงุช ุงูุชุทุจูู
- [ ] ุชุณุฌูู ุงูุฏุฎูู
- [ ] ุงูุชุญูู ูู ุนุฑุถ "0" ุนูุฏ ุนุฏู ูุฌูุฏ ุฑุญูุงุช ูุดุทุฉ

### 3. Child Data UI
- [ ] ูุชุญ ุงูุตูุญุฉ ุงูุฑุฆูุณูุฉ
- [ ] ุงูุชุญูู ูู ุนุฏู ุธููุฑ "N/A"
- [ ] ุงูุชุญูู ูู ุนุฑุถ ุงูุจูุงูุงุช ุงููุชุงุญุฉ ููุท

### 4. Profile White Screen
- [ ] ูุชุญ ุงูุจุฑููุงูู
- [ ] ูุชุญ ุฏูุงููุฌ ุงูุฃุทูุงู
- [ ] ุฅุบูุงู ุงูุฏูุงููุฌ
- [ ] ุงูุชุญูู ูู ุนูู ุงูุตูุญุฉ ุจุดูู ุทุจูุนู

### 5. Today Tab Active Ride
- [ ] ูุชุญ ุฌุฏูู ุทูู
- [ ] ุงูุฐูุงุจ ุฅูู ุชุงุจ Today
- [ ] ุงูุชุญูู ูู ุนุฑุถ ุงูุฑุญูุฉ ุงููุดุทุฉ ูู ูุงุฑุช ุฃุฎุถุฑ (ุฅู ูุฌุฏุช)
- [ ] ุงูุชุญูู ูู ุนุฑุถ ูุนูููุงุช ุงูุชูููุช

---

## ุงูุฎูุงุตุฉ

ุชู ุชุทุจูู **5 ุชุญุณููุงุช ุฑุฆูุณูุฉ** ุชุบุทู:
- โ ุชุฌุฑุจุฉ ุงููุณุชุฎุฏู (UX)
- โ ุนุฑุถ ุงูุจูุงูุงุช (Data Display)
- โ ุฅุฏุงุฑุฉ ุงูุญุงูุฉ (State Management)
- โ ุงูุชูุฌูู ูุงููุตุงุฏูุฉ (Routing & Auth)
- โ ูุงุฌูุฉ ุงููุณุชุฎุฏู (UI)

ุฌููุน ุงูุชุญุณููุงุช ุฌุงูุฒุฉ ููุงุฎุชุจุงุฑ ูุงููุดุฑ! ๐
